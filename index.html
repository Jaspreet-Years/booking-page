<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule a Meeting with Ivan Barashki</title>
    <style>
        @import url('https://fonts.cdnfonts.com/css/boldenvan');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #fbf4e2;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: #bf2c5d;
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-family: 'BoldenVan', sans-serif;
            font-weight: normal;
            -webkit-font-smoothing: antialiased;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            padding: 30px 40px 20px;
            gap: 20px;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #999;
            font-weight: 600;
        }

        .step.active {
            color: #bf2c5d;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .step.active .step-number {
            background: #bf2c5d;
            color: white;
        }

        .step.completed .step-number {
            background: #e0e0e0;
            color: #999;
        }

        .content {
            padding: 20px 40px 40px;
        }

        /* Step 1: Date & Time Selection */
        .step-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .step-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .datetime-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            min-height: 400px;
        }

        .calendar-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-header h3 {
            font-size: 18px;
            color: #333;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-nav button {
            width: 36px;
            height: 36px;
            border: none;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .calendar-nav button:hover {
            background: #bf2c5d;
            color: white;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day-header {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            padding: 8px 0;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            background: white;
            border: 2px solid transparent;
        }

        .calendar-day:hover:not(.disabled):not(.empty) {
            border-color: #ffd47a;
            background: #ffd47a;
        }

        .calendar-day.selected {
            background: #ffd47a;
            color: #303030;
            font-weight: bold;
        }

        .calendar-day.selected:hover {
            background: #ffd47a;
            color: #303030;
            font-weight: bold;
        }

        .calendar-day.disabled {
            color: #ccc;
            cursor: not-allowed;
            background: #fafafa;
        }

        .calendar-day.empty {
            cursor: default;
            background: transparent;
        }

        .calendar-day.today {
            border-color: #ffd47a;
        }

        .timeslots-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
        }

        .timeslots-section h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
        }

        .selected-date {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            text-align: center;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            max-height: 350px;
            padding-right: 5px;
        }

        .time-slots::-webkit-scrollbar {
            width: 6px;
        }

        .time-slots::-webkit-scrollbar-track {
            background: #e0e0e0;
            border-radius: 3px;
        }

        .time-slots::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 3px;
        }

        .time-slot {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            font-size: 14px;
            font-weight: 500;
        }

        .time-slot:hover {
            border-color: #bf2c5d;
            background: #fff5f8;
            transform: translateY(-2px);
        }

        .time-slot.selected {
            border-color: #bf2c5d;
            background: #bf2c5d;
            color: white;
        }

        .placeholder-message {
            text-align: center;
            padding: 40px 20px;
            color: #999;
            grid-column: 1 / -1;
        }

        .loading {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            grid-column: 1 / -1;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Step 2: Contact Information - Two Column Layout */
        .contact-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            align-items: start;
        }

        .booking-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            position: sticky;
            top: 20px;
        }

        .booking-summary h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .summary-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 16px;
            color: #666;
            line-height: 1.5;
        }

        .summary-item svg {
            flex-shrink: 0;
            margin-top: 2px;
        }

        /* Host Section Styling */
        .host-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
        }

        .host-header {
            font-size: 13px;
            font-weight: 600;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .host-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: white;
            border-radius: 10px;
            text-decoration: none;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .host-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
        }

        .host-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .host-details {
            flex: 1;
        }

        .host-name {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .host-linkedin {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            color: #0077b5;
            font-weight: 500;
        }

        .host-linkedin svg {
            opacity: 0.8;
        }

        .host-profile:hover .host-linkedin {
            color: #005885;
        }

        .contact-form {
            width: 100%;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #bf2c5d;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #ffd47a;
            color: #303030;
            display:flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 212, 122, 0.25);
        }

        .btn-secondary {
            background: white;
            color: #333;
            border: 2px solid #666;
        }

        .btn-secondary:hover {
            background: #f0f4ff;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            display:flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .success-message {
            display: none;
            text-align: center;
            padding: 60px 40px;
            animation: fadeIn 0.5s ease-in-out;
        }

        .success-message.active {
            display: block;
        }

        .success-message svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            color: #28a745;
        }

        .success-message h3 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #333;
        }

        .success-message p {
            color: #666;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .error-message {
            background: #fee;
            border: 1px solid #fcc;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        @media (max-width: 768px) {
            .datetime-selection {
                grid-template-columns: 1fr;
            }

            .contact-container {
                grid-template-columns: 1fr;
            }

            .booking-summary {
                position: static;
            }

            .time-slots {
                grid-template-columns: repeat(2, 1fr);
            }

            .step-indicator {
                padding: 20px;
            }

            .step-text {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Schedule a Meeting</h1>
            <p>Book a 45-minute meeting with Ivan Barashki via Microsoft Teams</p>
        </div>

        <div class="step-indicator">
            <div class="step active" id="step1Indicator">
                <div class="step-number">1</div>
                <span class="step-text">Select Date & Time</span>
            </div>
            <div class="step" id="step2Indicator">
                <div class="step-number">2</div>
                <span class="step-text">Your Information</span>
            </div>
        </div>

        <div class="content">
            <div class="error-message" id="errorMessage"></div>

            <!-- Step 1: Date & Time Selection -->
            <div class="step-content active" id="step1">
                <div class="datetime-selection">
                    <div class="calendar-section">
                        <div class="calendar-header">
                            <h3 id="calendarMonth">November 2025</h3>
                            <div class="calendar-nav">
                                <button onclick="changeMonth(-1)">â—€</button>
                                <button onclick="changeMonth(1)">â–¶</button>
                            </div>
                        </div>
                        <div class="calendar-grid" id="calendar"></div>
                    </div>

                    <div class="timeslots-section">
                        <h3>Available Times</h3>
                        <div class="selected-date" id="selectedDateDisplay">
                            Select a date to see available times
                        </div>
                        <div class="time-slots" id="timeSlots">
                            <div class="placeholder-message">
                                ðŸ‘ˆ Please select a date from the calendar
                            </div>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" id="continueBtn" onclick="goToStep2()" disabled>
                        Next <img src="https://www.years.com/cdn/shop/files/Vector.svg?v=1684229610" alt="" style="width: 8px;" />
                    </button>
                </div>
            </div>

            <!-- Step 2: Contact Information -->
            <div class="step-content" id="step2">
                <div class="contact-container">
                    <!-- Left Side: Booking Summary -->
                    <div class="booking-summary">
                        <h3>Your Booking</h3>
                        <div class="summary-item">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            <span id="summaryDateTime">Date and time</span>
                        </div>
                        <div class="summary-item">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            <span>45 minutes</span>
                        </div>
                        <div class="summary-item">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg>
                            <span>Microsoft Teams Meeting</span>
                        </div>
                        
                        <!-- Host Information -->
                        <div class="host-section">
                            <div class="host-header">Host</div>
                            <a href="https://www.linkedin.com/in/ivan-barashki-9727a070/" target="_blank" class="host-profile">
                                <div class="host-avatar">
                                    <img src="Ivan.jpeg" alt="Ivan Barashki">
                                </div>
                                <div class="host-details">
                                    <div class="host-name">Ivan Barashki</div>
                                    <div class="host-linkedin">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                        </svg>
                                        View LinkedIn Profile
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Right Side: Contact Form -->
                    <div class="contact-form">
                        <form id="bookingForm">
                            <div class="form-group">
                                <label>Your Name *</label>
                                <input type="text" id="name" required placeholder="John Doe">
                            </div>

                            <div class="form-group">
                                <label>Email Address *</label>
                                <input type="email" id="email" required placeholder="john@example.com">
                            </div>

                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="tel" id="phone" placeholder="+44 xxxx xxx xxx">
                            </div>

                            <div class="form-group">
                                <label>Additional Notes</label>
                                <textarea id="notes" placeholder="Tell us what you'd like to discuss..."></textarea>
                            </div>

                            <div class="button-group">
                                <button type="button" class="btn btn-secondary" onclick="goToStep1()">
                                    Back
                                </button>
                                <button type="submit" class="btn btn-primary" id="submitBtn">
                                    Confirm Booking
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Success Message -->
            <div class="success-message" id="successMessage">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3>Booking Confirmed!</h3>
                <p>You'll receive a calendar invite and confirmation email shortly.</p>
                <button class="btn btn-primary" style="margin-top: 30px; max-width: 300px; margin-left: auto; margin-right: auto;" onclick="resetPage()">
                    Book Another Meeting
                </button>
            </div>
        </div>
    </div>

    <script>
  // Configuration
  const CONFIG = {
    GET_SLOTS_WEBHOOK: 'https://moreyears.app.n8n.cloud/webhook/get-available-slots',
    CREATE_BOOKING_WEBHOOK: 'https://moreyears.app.n8n.cloud/webhook/create-booking'
  };

  // --- Helper: format clicked calendar date as YYYY-MM-DD (no timezone conversion) ---
  function formatDateYMD(date) {
    const y = date.getFullYear();
    const m = String(date.getMonth() + 1).padStart(2, '0');
    const d = String(date.getDate()).padStart(2, '0');
    return `${y}-${m}-${d}`;
  }

  // State
  let currentDate = new Date();
  let selectedDate = null;
  let selectedTime = null;
  let availableSlots = [];

  // Initialize
  renderCalendar();

  function renderCalendar() {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    
    // Update header
    const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
    document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;

    // Get first day of month and days in month
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();
    today.setHours(0,0,0,0);

    // Build calendar
    const calendar = document.getElementById('calendar');
    calendar.innerHTML = '';

    // Day headers
    const dayHeaders = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    dayHeaders.forEach(day => {
      const header = document.createElement('div');
      header.className = 'calendar-day-header';
      header.textContent = day;
      calendar.appendChild(header);
    });

    // Empty cells before first day
    for (let i = 0; i < firstDay; i++) {
      const empty = document.createElement('div');
      empty.className = 'calendar-day empty';
      calendar.appendChild(empty);
    }

    // Days
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);
      const dayElement = document.createElement('div');
      dayElement.className = 'calendar-day';
      dayElement.textContent = day;

      // Disable past dates
      if (date < today) {
        dayElement.classList.add('disabled');
      } else {
        dayElement.onclick = () => selectDate(date);
      }

      // Mark today
      if (date.toDateString() === today.toDateString()) {
        dayElement.classList.add('today');
      }

      // Mark selected date
      if (selectedDate && date.toDateString() === selectedDate.toDateString()) {
        dayElement.classList.add('selected');
      }

      calendar.appendChild(dayElement);
    }
  }

  function changeMonth(direction) {
    currentDate.setMonth(currentDate.getMonth() + direction);
    renderCalendar();
  }

  async function selectDate(date) {
    selectedDate = date;
    selectedTime = null;
    renderCalendar();

    // Update display
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById('selectedDateDisplay').textContent = date.toLocaleDateString('en-US', options);

    // Fetch available slots (send the clicked date as YYYY-MM-DD)
    await fetchAvailableSlots(date);
  }

  async function fetchAvailableSlots(date) {
    const timeSlots = document.getElementById('timeSlots');
    timeSlots.innerHTML = '<div class="loading"><div class="loading-spinner"></div><div>Loading available slots...</div></div>';
    hideError();

    const dateStr = formatDateYMD(date);

    try {
      const response = await fetch(`${CONFIG.GET_SLOTS_WEBHOOK}?date=${dateStr}`);
      if (!response.ok) throw new Error('Failed to fetch slots');

      const data = await response.json();

      // normalize possible shapes
      let slots = [];
      if (Array.isArray(data) && data.length && data[0].availableSlots) {
        slots = data[0].availableSlots;
      } else if (data.availableSlots) {
        slots = data.availableSlots;
      } else if (Array.isArray(data) && data.length && data[0].json && data[0].json.availableSlots) {
        slots = data[0].json.availableSlots;
      } else {
        // try to find an array in the response
        const maybeArray = Object.values(data).find(v => Array.isArray(v));
        if (maybeArray) slots = maybeArray;
      }

      availableSlots = slots || [];

      if (availableSlots.length > 0) {
        renderTimeSlots(availableSlots);
      } else {
        timeSlots.innerHTML = '<div class="placeholder-message">No available slots for this date.<br>Please select another date.</div>';
        document.getElementById('continueBtn').disabled = true;
      }
    } catch (error) {
      console.error('Error:', error);
      showError('Unable to load available slots. Please try again.');
      timeSlots.innerHTML = '<div class="placeholder-message">Error loading slots.<br>Please try again.</div>';
      document.getElementById('continueBtn').disabled = true;
    }
  }

  function renderTimeSlots(slots) {
    const timeSlots = document.getElementById('timeSlots');
    timeSlots.innerHTML = '';

    slots.forEach(time => {
      const slot = document.createElement('div');
      slot.className = 'time-slot';
      slot.textContent = time;
      slot.onclick = () => selectTime(time, slot);
      timeSlots.appendChild(slot);
    });
  }

  function selectTime(time, element) {
    selectedTime = time;
    document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
    element.classList.add('selected');
    document.getElementById('continueBtn').disabled = false;
    hideError();
  }

  function goToStep2() {
    if (!selectedDate || !selectedTime) return;

    // Update summary
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const dateStr = selectedDate.toLocaleDateString('en-US', options);
    document.getElementById('summaryDateTime').textContent = `${dateStr} at ${selectedTime}`;

    // Switch steps
    document.getElementById('step1').classList.remove('active');
    document.getElementById('step2').classList.add('active');
    document.getElementById('step1Indicator').classList.remove('active');
    document.getElementById('step1Indicator').classList.add('completed');
    document.getElementById('step2Indicator').classList.add('active');

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function goToStep1() {
    document.getElementById('step2').classList.remove('active');
    document.getElementById('step1').classList.add('active');
    document.getElementById('step2Indicator').classList.remove('active');
    document.getElementById('step1Indicator').classList.remove('completed');
    document.getElementById('step1Indicator').classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  document.getElementById('bookingForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const submitBtn = document.getElementById('submitBtn');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Confirming...';
    hideError();

    const formData = {
      name: document.getElementById('name').value,
      email: document.getElementById('email').value,
      phone: document.getElementById('phone').value,
      date: formatDateYMD(selectedDate),
      time: selectedTime,
      notes: document.getElementById('notes').value,
      duration: 45,
      timestamp: new Date().toISOString()
    };

    try {
      const response = await fetch(CONFIG.CREATE_BOOKING_WEBHOOK, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(errorData.message || 'Booking failed');
      }

      // Show success
      document.getElementById('step2').classList.remove('active');
      document.getElementById('successMessage').classList.add('active');
      document.getElementById('step2Indicator').classList.remove('active');
      document.getElementById('step2Indicator').classList.add('completed');
    } catch (error) {
      console.error('Error:', error);
      showError(error.message || 'Something went wrong. Please try again.');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Confirm Booking';
    }
  });

  function resetPage() {
    // Reset state
    currentDate = new Date();
    selectedDate = null;
    selectedTime = null;
    availableSlots = [];
    
    // Reset form
    document.getElementById('bookingForm').reset();
    
    // Reset UI
    document.getElementById('successMessage').classList.remove('active');
    document.getElementById('step1').classList.add('active');
    document.getElementById('step2').classList.remove('active');
    
    // Reset step indicators
    document.getElementById('step1Indicator').classList.add('active');
    document.getElementById('step1Indicator').classList.remove('completed');
    document.getElementById('step2Indicator').classList.remove('active');
    document.getElementById('step2Indicator').classList.remove('completed');
    
    // Reset continue button
    document.getElementById('continueBtn').disabled = true;
    
    // Reset time slots display
    document.getElementById('timeSlots').innerHTML = '<div class="placeholder-message">ðŸ‘ˆ Please select a date from the calendar</div>';
    document.getElementById('selectedDateDisplay').textContent = 'Select a date to see available times';
    
    // Re-render calendar
    renderCalendar();
    
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function showError(message) {
    const errorEl = document.getElementById('errorMessage');
    errorEl.textContent = message;
    errorEl.style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function hideError() {
    document.getElementById('errorMessage').style.display = 'none';
  }
</script>

</body>
</html>
